"use strict";function update(t){lab&&lab.active&&lab.update(t)}var ENJ={scaleX:.990625,scaleY:.790625},CRE=createjs,RES=new CRE.LoadQueue;RES.getRes=RES.getResult,ENJ.assign=function(t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("target must be object or function");var e,i,s,o=arguments.length;for(s=1;o>s;s++){e=arguments[s];for(i in e)e.hasOwnProperty(i)&&Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}return t},ENJ.defineClass=function(t,e){var i,s;if("extend"in t){if(s=t.extend,"function"!=typeof s)throw new TypeError("superClass must be a function")}else s=Object;if("constructor"in t){if(i=t.constructor,"function"!=typeof i)throw new TypeError("subClass must be a function")}else i=function(){s.apply(this,arguments)};return i.prototype=Object.create(s.prototype),t&&ENJ.assign(i.prototype,t),e&&ENJ.assign(i,s,e),Object.defineProperty(i.prototype,"constructor",{value:i,enumerable:!1,writable:!0,configurable:!0}),i},ENJ.Element=function(){var t=CRE.Container,e=CRE.Point;return ENJ.defineClass({constructor:function(e){t.apply(this,arguments),this.register(),"object"==typeof e&&(this._store=e),this.ready()},extend:t,get active(){return this._active},register:function(){this._store={},this._active=!1,this.index=-1,this.location=null},ready:function(){},refresh:function(){},release:function(){this.removeAllEventListeners()},start:function(){this._active=!0},stop:function(){this._active=!1},locate:function(t,i,s){var o=this;i?(o.set(i),o.location=i):o.location=new e(o.x,o.y),void 0===s?o.index=t.getChildIndex(o):(o.index=s,s!==t.getChildIndex(o)&&t.setChildIndex(o,s))},store:function(t,e){var i,s=this;if("object"==typeof t){i=t;for(t in i)i.hasOwnProperty(t)&&s.store(t,i[t])}return"string"!=typeof t?s:void 0!==e&&e!==s._store[t]?(s._store[t]=e,s.storeChanged(t),s):s._store[t]},storeChanged:function(t){}})}(),ENJ.NumLabel=function(){var t=ENJ.Element,e=CRE.Bitmap,i=CRE.Text;return ENJ.defineClass({constructor:function(e){t.call(this,e)},extend:t,register:function(){t.prototype.register.call(this),this.field=null},ready:function(){var t,s;s=new e(RES.getRes("标签")),t=new i,t.set({color:"#fff",font:"12px Arial",x:15,y:5}),this.addChild(s,t),this.field=t},storeChanged:function(t){var e,i,s=this,o=s.store(t);switch(t){case"num":e=Math.floor(o),i=Math.floor(10*(o-e)),s.field.text=""+e+"."+i+s.store("unit")}}})}(),ENJ.Board=function(){var t=ENJ.Element,e=CRE.Shape,i=CRE.Text,s=CRE.Graphics;return ENJ.defineClass({constructor:function(e){t.call(this,e)},extend:t,ready:function(){var t,o,n,r=this;t=new s,t.beginFill("#000").drawRect(-80,0,1250,640),o=new e(t),n=new i,n.set({x:510,y:300,color:"#fff",font:"bold 36px Arial",textAlign:"center"}),r.addChild(o,n),r.set({label:n,rect:o})},storeChanged:function(t){var e=this,i=e.store(t),s=e.label;switch(t){case"title":s.text=i}}})}(),ENJ.Curve=function(){var t=CRE.Shape,e=CRE.Graphics;return ENJ.defineClass({constructor:function(i){t.call(this,i||new e)},extend:t,update:function(t,e){var i,s=[];s[0]=t,s[6]=e,i=Math.sqrt((s[6].x-s[0].x)*(s[6].x-s[0].x)+(s[6].y-s[0].y)*(s[6].y-s[0].y)),s[1]=new CRE.Point(2/12*i,-100),s[2]=new CRE.Point(4/12*i,0),s[3]=new CRE.Point(.5*i,100),s[4]=new CRE.Point(8/12*i,50),s[5]=new CRE.Point(10/12*i,0),s[6].x=s[6].x-s[0].x,s[6].y=s[6].y-s[0].y,this.graphics.clear().setStrokeStyle(4,1,1).beginStroke("#000").moveTo(0,0).quadraticCurveTo(s[1].x,s[1].y,s[2].x,s[2].y).quadraticCurveTo(s[3].x,s[3].y,s[4].x,s[4].y).quadraticCurveTo(s[5].x,s[5].y,s[6].x,s[6].y).endStroke(),this.x=s[0].x+9,this.y=s[0].y+5}})}(),ENJ.LiquidContainer=function(){var t=ENJ.Element,e=CRE.Bitmap,i=CRE.Tween;return ENJ.defineClass({constructor:function(e){t.apply(this,arguments)},extend:t,register:function(){t.prototype.register.call(this),this.shape=null,this.label=null},refresh:function(){this.shape.rotation=-this.rotation},showLabel:function(){var t=this.label;t&&(t.alpha=1,t.visible=!0)},hideLabel:function(){var t=this.label;t&&i.get(t).to({alpha:0},1e3).call(function(){t.visible=!1})}},{createLiquid:function(t,i,s){var o,n,r,a,l=new e(RES.getRes(t)),c=l.getBounds().clone();return o=(i>>24&255)/255,n=i>>16&255,r=i>>8&255,a=255&i,l.filters=[new CRE.ColorFilter(0,0,0,o,n,r,a,0)],l.cache(0,0,c.width,c.height),l.setBounds(0,0,c.width,c.height),l.mask=s,l}})}(),ENJ.SuckBall=function(){var t=ENJ.Element,e=CRE.Bitmap,i=CRE.Tween;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,ready:function(){var t,i;t=new e(RES.getRes("吸球")),t.x=-22,i=new e(RES.getRes("吸嘴")),i.x=-6,i.y=-48,this.addChild(i,t),this.ball=t},scale:function(){this.ball.scaleY=.5},suck:function(){i.get(this.ball).to({scaleY:1},500)}})}(),ENJ.Buret=function(){var t=ENJ.LiquidContainer,e=CRE.Shape,i=CRE.Bitmap,s=CRE.Graphics;return ENJ.defineClass({constructor:function(e){t.call(this,e)},extend:t,ready:function(){var o,n,r,a,l=this;o=new s,o.beginFill("#0f0").drawRect(-200,0,400,640),n=new e(o),n.x=20,r=t.createLiquid("滴定管液体",l.store("color"),n),a=new i(RES.getRes("滴定管")),l.addChild(r,a),l.total=100,l.shape=n,l.storeChanged("volume")},refresh:function(){var t=this;t.scaleX<0?t.shape.rotation=-2*t.rotation+90:t.shape.rotation=-t.rotation},storeChanged:function(t){var e=this.store(t);switch(t){case"volume":this.shape.set({y:450-450*e/80+50})}}})}(),ENJ.Beaker=function(){var t=ENJ.LiquidContainer,e=CRE.Shape,i=CRE.Bitmap,s=CRE.Graphics;return ENJ.defineClass({constructor:function(e){t.call(this,e)},extend:t,ready:function(){var o,n,r,a,l,c,h=this;o=new s,o.beginFill("#0f0").drawRect(-200,0,400,200).drawEllipse(-38,-7.5,76,15),n=new e(o),n.x=50,o=new s,o.beginFill("#fff").drawCircle(0,0,38),a=new e(o),a.set({x:n.x-4,scaleY:.2,alpha:.2}),r=new ENJ.NumLabel({unit:"ml"}),r.x=10,l=t.createLiquid("烧杯液体",h.store("color"),n),c=new i(RES.getRes("烧杯")),h.addChild(l,a,c),h.set({liquid:l,label:r,level:a,shape:n}),h.storeChanged("volume")},refresh:function(){var t=this,e=Math.sin(t.rotation/180*Math.PI);t.shape.rotation=-t.rotation,t.shape.x=50+36*e},storeChanged:function(e){var i=this,s=i.store(e),o=i.label,n=i.shape;switch(e){case"volume":0>=s?(i.level.visible=!1,i.level.y=n.y=500):(this.fixing||(i.level.visible=!0),i.level.y=n.y=100-100*s/100-0),o.store("num",s),o.y=n.y-10;break;case"color":i.liquid=t.createLiquid("烧杯液体",s,n),i.removeChildAt(0),i.addChildAt(i.liquid,0)}},fix:function(){var t=this;t.fixing=!0,t.level.visible=!1,t.shape.scaleX=2,t.regX=100},unfix:function(){var t=this;t.fixing=!1,t.level.visible=!0,t.shape.scaleX=1,t.regX=0}})}(),ENJ.Cylinder=function(){var t=ENJ.LiquidContainer,e=CRE.Shape,i=CRE.Bitmap,s=CRE.Graphics;return ENJ.defineClass({constructor:function(e){t.call(this,e)},extend:t,ready:function(){var o,n,r,a,l=this;o=new s,o.beginFill("#0f0").drawRect(-300,0,600,400),n=new e(o),n.x=35,r=t.createLiquid("量筒液体",l.store("color"),n),a=new i(RES.getRes("量筒")),l.addChild(r,a),l.shape=n,l.storeChanged("volume")},storeChanged:function(t){var e=this.store(t);switch(t){case"volume":this.shape.y=290-2.15*e-25}}})}(),ENJ.WaterBottle=function(){return ENJ.defineClass({constructor:function(){ENJ.Element.apply(this,arguments)},extend:ENJ.Element,ready:function(){var t,e;t=new CRE.Bitmap(RES.getRes("蒸馏水瓶"));var i={images:[RES.getRes("水流")],frames:{width:200,height:200}},s=new CRE.SpriteSheet(i);this.flow=e=new CRE.Sprite(s),e.set({y:25,scaleX:-.5,scaleY:.5,visible:!1}),e.framerate=30,this.addChild(t,e)},dump:function(t,e){var i=this.flow;t?(i.visible=!0,i.rotation=e,i.gotoAndPlay(0)):(i.visible=!1,i.rotation=0,i.gotoAndStop(0))}})}(),ENJ.VolumetricFlask=function(){var t=ENJ.LiquidContainer,e=CRE.Tween,i=CRE.Shape,s=CRE.Bitmap,o=CRE.Graphics,n=t.prototype;return ENJ.defineClass({constructor:function(e){t.call(this,e)},extend:t,ready:function(){var e,n,r,a,l,c,h=this;e=new o,e.beginFill("#0f0").drawRect(-200,0,400,400),n=new i(e),n.x=63,r=new ENJ.NumLabel({unit:"ml"}),r.visible=!1,r.x=75,a=t.createLiquid("容量瓶液体",h.store("color"),n),l=new s(RES.getRes("容量瓶")),c=new s(RES.getRes("容量瓶盖")),c.set({x:45,y:-40}),h.addChild(a,l,c,r),h.set({cap:c,label:r,shape:n}),h.storeChanged("volume")},storeChanged:function(t){var e=this.store(t),i=this.label,s=this.shape;switch(t){case"volume":80>e?s.y=256-e*e/6400*100:s.y=156-60*(e-80)/20,i.store("num",e),i.y=s.y-10}},start:function(){n.start.call(this),e.get(this.cap).to({x:0,y:-60,rotation:-30,alpha:0},250)},stop:function(){n.stop.call(this),e.get(this.cap).to({x:45,y:-40,rotation:0,alpha:1},250)},refresh:function(){var t=(this.store("volume"),this.shape);t.rotation=-this.rotation,this.rotation>90?t.y=180:this.storeChanged("volume")}})}(),ENJ.SoySauce=function(){var t=ENJ.LiquidContainer,e=CRE.Tween,i=CRE.Shape,s=CRE.Bitmap,o=CRE.Graphics;return ENJ.defineClass({constructor:function(e){t.call(this,e)},extend:t,ready:function(){var e,n,r,a,l,c=this;e=new o,e.beginFill("#0f0").drawRect(-200,0,400,400),n=new i(e),n.x=63,r=t.createLiquid("酱油",c.store("color"),n),a=new s(RES.getRes("酱油瓶")),l=new s(RES.getRes("酱油瓶盖")),l.set({x:26,y:-15}),c.addChild(r,a,l),c.cap=l,c.shape=n,c.storeChanged("volume")},storeChanged:function(t){var e=this.store(t);switch(t){case"volume":this.shape.y=260-260*e/250}},start:function(){t.prototype.start.call(this),e.get(this.cap).to({x:0,y:-50,rotation:-30,alpha:0},300)},stop:function(){t.prototype.stop.call(this),e.get(this.cap).to({x:26,y:-15,rotation:0,alpha:1},300)}})}(),ENJ.ReagenBottle=function(){var t=ENJ.LiquidContainer,e=CRE.Tween,i=CRE.Shape,s=CRE.Bitmap,o=CRE.Graphics,n=t.prototype;return ENJ.defineClass({constructor:function(e){t.apply(this,arguments)},extend:t,ready:function(){var e,n,r,a,l,c,h=this;c=new o,c.beginFill("#0f0").drawRect(-100,0,300,300),e=new i(c),e.x=50,n=t.createLiquid("试剂瓶液体",h.store("color"),e),r=new s(RES.getRes("试剂瓶")),a=new s(RES.getRes(h.store("icon"))),a.set({x:10,y:80}),l=new s(RES.getRes(h.store("cap"))),l.set({x:13,y:-8});var p=new CRE.Container,u=r.getBounds();p.addChild(r,a),p.cache(0,0,u.width,u.height),h.addChild(n,l,p),h.shape=e,h.cap=l,h.storeChanged("volume"),h.setBounds(0,0,90,169)},storeChanged:function(t){var e=this.store(t),i=(this.label,this.shape);switch(t){case"volume":i.y=120-120*e/500+49}},start:function(){n.start.call(this),e.get(this.cap).to({x:0,y:-60,rotation:-30,alpha:0},250)},stop:function(){n.stop.call(this),e.get(this.cap).to({x:13,y:-8,rotation:0,alpha:1},250)}})}(),ENJ.PHElectrode=function(){var t=ENJ.Element,e=CRE.Tween,i=CRE.Bitmap;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,ready:function(){var t,e;e=new i(RES.getRes("PH电极套")),e.x=-2.5,e.y=150,t=new i(RES.getRes("PH电极")),this.addChild(t,e),this.cap=e},start:function(){t.prototype.start.call(this),e.get(this.cap).to({x:10,y:250,rotation:-30,alpha:0},250)},stop:function(){t.prototype.stop.call(this),e.get(this.cap).to({x:0,y:150,rotation:0,alpha:1},250)}})}(),ENJ.PHInstrument=function(){var t=ENJ.Element,e=CRE.Tween,i=CRE.Text,s=CRE.Bitmap,o=CRE.Shape;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,ready:function(){var t,e,n,r,a;t=new s(RES.getRes("PH仪")),e=new s(RES.getRes("PH仪面板")),e.set({x:160,y:160,visible:!1,regX:80,regY:80}),n=new i,n.set({x:100,y:50,visible:!1,color:"#fff",font:"bold 24px Arial"}),r=new o,r.graphics.beginFill("#000").drawCircle(0,0,20),r.set({x:210,y:115,alpha:.01}),a=new o,a.graphics.beginFill("#000").drawCircle(0,0,23),a.set({x:163,y:135,alpha:.01}),this.addChild(t,e,n,r,a),this.plane=e,this.label=n,this.btn1=r,this.btn2=a,r.cursor="pointer",a.cursor="pointer"},start:function(){t.prototype.start.call(this);var i=this,s=this.plane;s.set({visible:!0,scaleX:.6,scaleY:.1,alpha:.5}),e.get(s).to({scaleX:1,scaleY:1,x:160,y:80,alpha:1},500).call(function(){i.label.visible=!0})},stop:function(){var i=this;i.label.visible=!1,e.get(i.plane).to({alpha:0},500).call(function(){i.plane.visible=!0}),t.prototype.stop.call(i)},willCorrect:function(){this.active&&this.btn1.addEventListener("click",this.onCorrect.bind(this))},willRead:function(){this.active&&this.btn2.addEventListener("click",this.onRead.bind(this))},onCorrect:function(){this.btn1.removeAllEventListeners(),this.dispatchEvent("correct")},onRead:function(){this.btn2.removeAllEventListeners(),this.dispatchEvent("read")},storeChanged:function(t){switch(t){case"number":this.label.text=""+this.store(t)}}})}(),ENJ.MagneticStirrer=function(){var t=ENJ.Element,e=CRE.Tween,i=CRE.Bitmap;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,ready:function(){var t,e;t=new i(RES.getRes("磁力搅拌器")),e=new i(RES.getRes("磁力搅拌器旋钮")),e.set({x:98.5,y:109,regX:12.5,regY:13}),this.addChild(t,e),this.button=e},start:function(){t.prototype.start.call(this),e.get(this.button).to({rotation:120},250)},stop:function(){e.get(this.button).to({rotation:0},250),t.prototype.stop.call(this)}})}(),ENJ.TitrationStand=function(){var t=ENJ.Element,e=CRE.Bitmap,i=CRE.Sprite,s=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,ready:function(){var t,s,o;t=new e(RES.getRes("滴定架")),o={images:[RES.getRes("蝴蝶夹")],frames:{width:82,height:111}},s=new i(new CRE.SpriteSheet(o)),s.set({x:5,y:20}),s.gotoAndStop(0),this.addChild(s,t),this.clip=s,this.regX=131},start:function(){s.start.call(this),this.clip.gotoAndStop(0)},stop:function(){this.clip.gotoAndStop(1),s.stop.call(this)}})}(),ENJ.Pipet=function(){var t=ENJ.LiquidContainer,e=CRE.Shape,i=CRE.Bitmap,s=CRE.Graphics;return ENJ.defineClass({constructor:function(e){t.apply(this,arguments)},extend:t,ready:function(){var o,n,r,a,l,c=this;o=new s,o.beginFill("#0f0").drawRect(-200,0,400,240),n=new e(o),n.x=8,r=new ENJ.NumLabel({unit:"ml"}),r.visible=!1,r.x=10,a=t.createLiquid("移液管液体",c.store("color"),n),l=new i(RES.getRes("移液管")),c.addChild(a,l,r),c.set({label:r,shape:n,rotation:-90,ratio:this.store("ratio")||1}),c.storeChanged("volume")},storeChanged:function(t){var e=this.store(t),i=this.label,s=this.shape;switch(t){case"volume":s.set({y:240-240*e/8+60,scaleY:e/8}),i.store("num",e*this.ratio),i.y=s.y-10}}})}(),ENJ.ResultTable_3=function(){var t=ENJ.Element,e=CRE.Bitmap,i=CRE.Text;return ENJ.defineClass({constructor:function(e){t.call(this,e)},extend:t,ready:function(){var t,s,o,n,r=this,a=["v0_1","v0_2","v1_1","v1_2","v2_1","v2_2","v1_m","v2_m","xx"];for(t=new e(RES.getRes("结果报告3")),s=new e(RES.getRes("关闭按钮")),s.set({regX:24,regY:24,cursor:"pointer"}),s.set({x:700,y:10}),r.btn=s,r.addChild(t,s),n=0;n<a.length;++n)o=new i(""),o.set({color:"#000",font:"bold 18px Arial",textAlign:"center"}),r[a[n]]=o,r.addChild(o);r.v0_1.set({x:620,y:125}),r.v0_2.set({x:620,y:155}),r.v1_1.set({x:270,y:125}),r.v1_2.set({x:385,y:125}),r.v2_1.set({x:270,y:155}),r.v2_2.set({x:385,y:155}),r.v1_m.set({x:500,y:125}),r.v2_m.set({x:500,y:155}),r.xx.set({x:435,y:185}),s.addEventListener("mousedown",function(){s.set({scaleX:.8,scaleY:.8})}),s.addEventListener("pressup",function(){s.set({scaleX:1,scaleY:1}),r.dispatchEvent("close")}),s.cursor="pointer"},storeChanged:function(t){var e=this,i=e.store(t);e[t]&&(e[t].text=""+i)}})}(),ENJ.Scene=function(){var t=CRE.Container;return ENJ.defineClass({constructor:function(){t.apply(this,arguments),this.register(),this.ready()},extend:t,register:function(){},ready:function(){},place:function(t,e,i){e?(t.set(e),t.location=e):t.location=new Point(t.x,t.y),void 0===i?t.index=this.getChildIndex(t):(t.index=i,i!==this.getChildIndex(t)&&this.setChildIndex(t,i))},setToTop:function(t,e){e=e||1,this.setChildIndex(t,this.numChildren-e)},getLocalMouse:function(){return this.globalToLocal(this.stage.mouseX,this.stage.mouseY)}})}(),ENJ.Scene_3=function(){var t=ENJ.Scene,e=CRE.Bitmap,i=CRE.Point;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,ready:function(){var t,s,o,n,r,a,l,c,h,p,u,d,f,v,g,E,m,b,y,x,C,w,S,N,J,k,R,_,L,B,P,I=this,T=[],F=[],A=[];for(t=new e(RES.getRes("背景")),s=new e(RES.getRes("纸巾")),s.visible=!1,m=new e(RES.getRes("引流棒")),o=new ENJ.Curve,a=new e(RES.getRes("水滴")),a.visible=!1,n={images:[RES.getRes("手")],frames:{width:100,height:129},animations:{up:0,down:1}},r=new CRE.SpriteSheet(n),u=new CRE.Sprite(r),u.gotoAndStop("up"),u.visible=!1,n={images:[RES.getRes("转子")],frames:{width:40,height:19}},r=new CRE.SpriteSheet(n),f=0;2>f;++f)p=new CRE.Sprite(r),p.gotoAndStop(0),A.push(p);x=new ENJ.MagneticStirrer,g=new ENJ.WaterBottle(RES.getRes("蒸馏水瓶")),J=new ENJ.ReagenBottle({volume:500,color:587202559,icon:"氢氧化钠标签",cap:"盖子甲"}),k=new ENJ.ReagenBottle({volume:500,color:1714618368,icon:"甲醛标签",cap:"盖子甲"}),v=new e(RES.getRes("移液管架")),S=new ENJ.TitrationStand,S.scaleX=-1,w=new ENJ.Buret({volume:0,color:587202559}),R=new ENJ.SuckBall,_=new ENJ.SoySauce({volume:180,color:3711107072}),L=new ENJ.Pipet({volume:0,color:1714618368}),B=new ENJ.Pipet({volume:0,color:1714618368}),P=new ENJ.Pipet({volume:0,color:1714618368,ratio:5}),L.rotation=-90,B.rotation=-90,P.set({rotation:-90,scaleY:1.2}),m.rotation=-90,N=new ENJ.PHElectrode,C=new ENJ.PHInstrument,y=new ENJ.Cylinder({volume:0,color:587202559});var q=[587202559,1714618368,587202559];for(f=0;3>f;++f)E=new ENJ.VolumetricFlask({volume:100,color:q[f]}),F.push(E);for(f=0;4>f;++f)d=new ENJ.Beaker({volume:0,color:587202559}),this.place(d,new i(100-30*f,450+20*f)),T.push(d);for(b=new ENJ.Beaker({volume:10,color:1714618368}),b.set({scaleX:1.25,scaleY:1.25}),h=new ENJ.ResultTable_3,h.set({regX:360,regY:200}),h.set({x:480,y:320,visible:!1}),l=new CRE.Text,l.set({x:50,y:50,color:"#fff",font:"bold 18px Arial"}),c=new ENJ.Board,c.visible=!1,I.addChild(t,v,x,J,k,y,g,L,B,P,R,S,m,A[0],A[1],o,C,F[0],F[1],F[2],_,N,w,T[0],T[1],T[2],T[3],b,s,u,a,h,l,c),f=0;3>f;++f)I.place(F[f],new i(130+50*f,200+10*f));for(F[1].visible=!1,f=0;4>f;++f)I.place(T[f],new i(100-30*f,450+20*f));for(T[1].visible=!1,T[3].visible=!1,f=0;2>f;++f)I.place(A[f],{x:600+20*f,y:470+10*f});I.place(b,new i(100,1e3)),t.set({regX:600,regY:320,scaleX:1.2}),I.place(t,new i(480,320)),I.place(g,new i(370,270)),I.place(v,new i(700,270)),I.place(S,new i(520,1e3)),I.place(w,new i(650,1e3)),I.place(C,new i(680,380)),I.place(m,new i(680,375)),I.place(x,new i(600,500)),I.place(J,new i(580,300)),I.place(k,new i(490,300)),I.place(L,new i(700,300)),I.place(B,new i(700,325)),I.place(P,new i(650,350)),I.place(R,new i(670,440)),I.place(y,new i(310,180)),I.place(_,new i(40,210)),I.place(N,new i(690,330)),o.update(N,new CRE.Point(800,480)),I.set({curve:o,hand:u,stirrer:x,drainageBar:m,titrationStand:S,phElectrode:N,phInstrument:C,bigBeaker:b,beaker:T[3],pipet:L,pipet2:B,bigPipet:P,waterBottle:g,soySauce:_,suckBall:R,paper:s,cylinder:y,beakers:T,rotors:A,volumetricFlasks:F,volumetricFlask:F[1],reagenBottle:J,formaldehyde:k,drop:a,buret:w,tip:l,board:c,table:h})}})}(),ENJ.Step=function(){var t=CRE.EventDispatcher;return ENJ.defineClass({constructor:function(e){t.apply(this,arguments),this.scene=e.scene,this.store=e.store},extend:t,get active(){return this._active},update:function(){},start:function(){this._active=!0},stop:function(){this._active=!1,this.dispatchEvent("complete")}})}(),ENJ.Step_CutBag=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t,s,o=this.store,n=this.scene,r=this.handlers=[];t=this.bag=n.bags[o.bag],s=this.scissors=n.scissors,t.cursor="pointer",s.cursor="pointer",s.visible=!1,this.flags=[],r[0]=this.onClickBag.bind(this),r[1]=this.onMouseScissors.bind(this),n.setChildIndex(t,n.getChildIndex(s)-1),e.get(t).wait(1e3).to({x:320,y:450,scaleY:1,skewX:0,rotation:-45},500).call(function(){s.visible=!0,s.gotoAndStop("open"),s.addEventListener("mousedown",r[1]),s.addEventListener("pressup",r[1])})},stop:function(){i.stop.call(this);var t=this.handlers,e=this.bag,s=this.scissors;e.cursor="auto",s.cursor="auto",s.removeEventListener("pressup",t[1]),s.removeEventListener("mousedown",t[1]),t.splice(0)},onClickBag:function(){var t=this.bag,i=this.scissors,s=this.handlers;this.flags[0]||(this.flags[0]=!0,e.get(t).to({x:320,y:450,scaleY:1,skewX:0,rotation:-45},500).call(function(){i.visible=!0,i.gotoAndStop("open"),i.addEventListener("mousedown",s[1]),i.addEventListener("pressup",s[1])}))},onMouseScissors:function(t){var e=this.bag,i=this.scissors;switch(t.type){case"mousedown":this.flags[1]=!0,i.gotoAndStop("close");break;case"pressup":i.gotoAndStop("open"),this.flags[1]&&i.x>e.x+20&&i.x<e.x+80&&i.y>e.y-50&&i.y<e.y&&(i.visible=!1,e.gotoAndStop("open"),this.stop()),this.flags[1]=!1}},update:function(){this.scissors.set(this.scene.getLocalMouse())}})}(),ENJ.Step_WashBag=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t,s=this.store,o=this.scene,n=this.handlers=[];this.time=0,this.flags=[],this.bag=o.bags[s.bag],this.beaker=o.beakers[s.beaker],this.powder=o.powder,t=this.bottle=o.waterBottle,t.cursor="pointer",t.active||(t.start(),e.get(t).to({x:400,y:400},250)),n[0]=this.onClickBottle.bind(this),t.addEventListener("click",n[0])},stop:function(){var t=this.handlers;this.store.remain?e.get(this.bag).to({rotation:30},250):e.get(this.bag).to({alpha:0},250),this.bottle.cursor="auto",this.bottle.removeEventListener("click",t[0]),i.stop.call(this)},onClickBottle:function(){var t=this,i=this.bag,s=(this.beaker,this.bottle);this.flags[0]||(this.flags[0]=!0,e.get(s).to({rotation:-30,x:320,y:430},250).call(function(){t.flags[1]=!0,e.get(s).wait(1e3).to({rotation:0,x:400,y:400},250),e.get(i).wait(1e3).to({rotation:120},1e3)}))},update:function(t){var e,i,s=this.powder,o=this.beaker;this.flags[1]&&(e=this.time+=t.delta,i=o.store("volume"),i>=this.store.volume&&(o.store("volume",this.store.volume),this.stop()),e>1e3&&(o.store("volume",i+t.delta/200),s.alpha>0?s.alpha-=t.delta/2e3:s.visible=!1))}})}(),ENJ.Step_DumpPowder=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t,s,o=this.store,n=this.scene,r=this.handlers=[],a=this.flags=[];t=this.bag=n.bags[o.bag],s=this.beaker=n.beakers[o.beaker],this.powder=n.powder,t.cursor="pointer";var l=new CRE.Graphics;l.beginFill("#0f0").drawEllipse(0,0,80,40),this.rect=new CRE.Shape(l),e.get(s).to({x:300,y:500},500),e.get(t).to({rotation:30},500).call(function(){a[0]=!0}),r[0]=this.onClickBag.bind(this),t.addEventListener("click",r[0]),t.cursor="pointer"},stop:function(){var t=this.handlers;this.bag.removeEventListener("click",t[0]),this.bag.cursor="auto",i.stop.call(this)},onClickBag:function(){if(this.flags[0]&&!this.flags[1]){this.flags[1]=!0;var t=this.powder,i=this.beaker,s=this.bag,o=this.rect,n=this;t.set({alpha:1,visible:!0,x:i.x+15,y:i.y+75}),o.x=t.x-10,o.y=t.y-12,t.mask=o,t.y+=20,e.get(s).to({rotation:120},250).wait(1500).to({rotation:30},250).call(function(){n.stop()}),e.get(t).to({y:i.y+75},2e3)}}})}(),ENJ.Step_DumpWater=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t,s=this.scene,o=this.handlers=[];t=this.bottle=s.waterBottle,this.beaker=s.beakers[this.store.beaker],this.flags=[],t.active||(t.start(),e.get(t).to({x:400,y:400},250)),o[0]=this.onClickBottle.bind(this),t.addEventListener("click",o[0]),t.cursor="pointer"},stop:function(){this.bottle.removeEventListener("click",this.handlers[0]),this.bottle.cursor="auto",this.bottle.stop(),i.stop.call(this)},update:function(t){var e,i=this.beaker;this.flags[1]&&(e=i.store("volume"),e>this.store.volume&&this.stop(),i.store("volume",e+t.delta/100))},onClickBottle:function(){var t=this.bottle,i=this;this.flags[0]||(this.flags[0]=!0,this.store.washing?e.get(t).to({rotation:-30,x:360,y:450},250).call(function(){i.flags[1]=!0,t.dump(!0,0)}).to({x:370,y:400},500).to({x:360,y:450},500).to({x:370,y:400},500).to({x:360,y:450},500).call(function(){t.dump(!1,0)}).to({rotation:0,x:t.location.x,y:t.location.y},250):e.get(t).to({rotation:-30,x:340,y:430},250).call(function(){i.flags[1]=!0,t.dump(!0,0)}).wait(1e3).call(function(){t.dump(!1,0)}).to({rotation:0,x:t.location.x,y:t.location.y},250))}})}(),ENJ.Step_BlowLiquid=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t,s,o,n,r=this.scene,a=this.store,l=this.handlers=[];this.scale=a.scale||1,this.flags=[],s=this.hand=r.hand,o=this.pipet=a.pipet?r[a.pipet]:r.pipet,"bottle"in a?n=this.bottle=r[a.bottle]:"beaker"in a&&(n=this.bottle=r.beakers[a.beaker],n.fix()),n.start(),r.setChildIndex(o,r.getChildIndex(n)-1),l[0]=this.onClick.bind(this),s.addEventListener("click",l[0]),this.flags[0]=a.rightNow,n.visible=!0,s.set({visible:!0,y:o.y-20,x:o.x-10});var c=this,h=function(){c.flags[2]=!0,a.rightNow&&s.gotoAndStop("up")};if(a.rotation){t=a.point?a.point:{x:305,y:400};var p=a.offsetX||0,u=a.offsetY||0;e.get(n).to({x:t.x+p,y:t.y+u,rotation:a.rotation},500).call(h),e.get(s).to({y:t.y-210},500),e.get(o).to({y:t.y-190},500)}else t={x:300,y:500},e.get(n).to({x:t.x,y:t.y},500).call(h),e.get(s).to({y:t.y-270},500),e.get(o).to({y:t.y-250},500)},stop:function(){var t=this.bottle,e=this.hand;t.stop(),e.visible=!1,e.gotoAndStop("down"),this.scene.setChildIndex(t,t.index),e.removeEventListener("click",this.handlers[0]),i.stop.call(this)},update:function(t){var i,s,o=this,n=this.hand,r=this.bottle,a=this.pipet,l=this.store.volume,c=this.store.remain,h=this.store.showLabel;r.refresh(),this.flags[0]&&!this.flags[1]&&this.flags[2]&&(i=a.store("volume"),s=t.delta/1e3,l>=i?(i=l,this.flags[1]=!0,n.gotoAndStop("down"),c>1?this.stop():e.get(r).wait(1e3).to({x:r.location.x,y:r.location.y,rotation:0},500).call(function(){"beaker"in o.store&&r.unfix(),o.scene.setChildIndex(r,r.index),o.stop()}),h&&a.hideLabel(),0>=i&&e.get(a).to({x:a.location.x,y:a.location.y,rotation:-90},500)):i-=s,h&&a.showLabel(),a.store("volume",i),r.store("volume",r.store("volume")+s*this.scale))},onClick:function(){this.flags[2]&&!this.flags[0]&&(this.flags[0]=!0,this.hand.gotoAndStop("up"))}})}(),ENJ.Step_SuckLiquid=function(){var t=ENJ.Step,e=CRE.Ease,i=CRE.Tween,s=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){s.start.call(this);var t,o,n,r,a=this.store,l=this.scene,c=this.handlers=[],h=this;t=this.hand=l.hand,o=this.pipet=a.pipet?l[a.pipet]:l.pipet,n=this.bottle=l[a.bottle],r=this.suckBall=l.suckBall,o.cursor="pointer",r.cursor="pointer",c[0]=this.onClickPipet.bind(this),c[1]=this.onClickHand.bind(this),c[2]=this.onClickSuckBall.bind(this),this.flags=[],[o,n].forEach(function(t){t.cursor="pointer"}),n.start(),i.get(n).to({x:300,y:400},500,e.sineInOut).call(function(){o.active&&h.insertPipet()}),t.visible=!1,o.addEventListener("click",c[0]),t.addEventListener("mousedown",c[1]),t.addEventListener("pressup",c[1]),r.addEventListener("mousedown",c[2]),r.addEventListener("pressup",c[2])},stop:function(){var t=[],e=this.handlers,i=(this.scene,this.hand),o=this.pipet,n=this.bottle,r=this.suckBall;o.cursor="auto",r.cursor="auto",this.store.remain||(t.push(o),t.push(n),n.stop()),t.forEach(function(t){t.cursor="auto"}),o.removeEventListener("click",e[0]),i.removeEventListener("click",e[1]),r.removeEventListener("mousedown",e[2]),r.removeEventListener("pressup",e[2]),s.stop.call(this)},update:function(t){var e,i,s=this.store,o=this.scene.getLocalMouse(),n=this.hand,r=this.pipet,a=this.bottle;a.refresh(),this.flags[2]||n.set({x:o.x-50,y:o.y-50}),this.flags[0]&&!this.flags[1]&&(e=r.store("volume"),i=t.delta/200,e>=s.volume?(e=s.volume,this.flags[1]=!0,n.visible=!0,n.gotoAndPlay("up")):e+=i,r.store("volume",e),a.store("volume",a.store("volume")-i))},onClickPipet:function(){var t=this.pipet;this.bottle;t.active?(t.stop(),i.get(t).to({x:t.location.x,y:t.location.y,rotation:-90},500,e.sineInOut)):this.insertPipet()},insertPipet:function(){var t=this,s=this.pipet,o=this.bottle,n=o.getBounds();i.get(s).to({x:o.x+.5*n.width-5,y:o.y-300,rotation:0},500,e.sineInOut).to({y:o.y-150},500,e.sineInOut).call(function(){t.flags[3]=!0,s.start()})},onClickHand:function(t){var s=this.hand,o=this.suckBall,n=this.bottle,r=this.pipet;if(s.visible&&!this.flags[2])switch(t.type){case"mousedown":s.gotoAndStop("down"),s.x>r.x-40&&s.x<r.x+20&&s.y>r.y-40&&s.y<r.y+20&&(this.flags[2]=!0,s.set({x:r.x-10,y:r.y-20}),this.store.remain||i.get(n).wait(500).to({x:n.location.x,y:n.location.y},500,e.sineInOut).call(function(){n.stop()}),o.stop(),this.scene.setChildIndex(o,o.index),i.get(o).to({x:o.location.x,y:o.location.y,rotation:0},500,e.sineInOut).wait(500).call(this.stop.bind(this)),i.get(s).to({y:n.y-320},500),i.get(r).to({y:n.y-300},500));break;case"pressup":s.gotoAndStop("up")}},onClickSuckBall:function(t){var s=this.suckBall,o=this.pipet;if(this.flags[3])switch(t.type){case"mousedown":s.active&&s.scale();break;case"pressup":if(s.active)s.suck(),this.bottle.active&&o.active&&(this.flags[0]=!0);else if(o.active){s.start();var n=this.scene;n.setChildIndex(s,n.getChildIndex(this.pipet)-1),i.get(s).to({x:o.x+8,y:o.y,rotation:180},500,e.sineInOut)}}}})}(),ENJ.Step_StirLiquid=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t,s=this.store,o=this.scene,n=this.handlers=[];this.flags=[],this.time=0,this.beaker=o.beakers[s.beaker],t=this.bar=o.drainageBar,t.cursor="pointer",this.store.remain&&e.get(t).to({x:410,y:300,rotation:10},500),n[0]=this.onClickDrainageBar.bind(this),t.addEventListener("click",n[0])},stop:function(){this.bar.cursor="auto",this.bar.removeEventListener("click",this.handlers[0]),i.stop.call(this)},update:function(t){this.flags[0]&&(this.time+=t.delta,this.time>5e3&&(this.tween.loop=!1,this.stop()))},onClickDrainageBar:function(){this.flags[0]||(this.flags[0]=!0,this.tween=e.get(this.bar,{loop:!0}).to({x:360},250).to({x:410},250))}})}(),ENJ.Step_TransferLiquid=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t,s,o,n=this.scene,r=this.store,a=this.handlers=[];this.flags=[],t=this.bar=n.drainageBar,s=this.beaker=n.beakers[r.beaker],o=this.flask=n.volumetricFlasks[r.flask],s.cursor="pointer",o.start(),e.get(o).to({x:250,y:300},250),e.get(t).to({x:350,y:100},250),s.fix(),e.get(s).to({x:330,y:250,rotation:30},250),a[0]=this.onClickBeaker.bind(this),s.addEventListener("click",a[0])},stop:function(){var t=this.beaker;t.cursor="auto",t.removeEventListener("click",this.handlers[0]),i.stop.call(this)},update:function(t){var i,s,o=this.bar,n=this.beaker,r=this.flask;n.refresh(),this.flags[0]&&(s=t.delta/5e3*20,i=n.store("volume")-s,0>=i&&(this.flags[0]=!1,i=0,n.unfix(),this.store.remain?(e.get(n).to({x:300,y:500,rotation:0},250),e.get(o).to({x:410,y:300},500).call(this.stop.bind(this))):(e.get(n).to({x:-500,y:0,rotation:0},250).call(function(){n.visible=!1}),e.get(o).to({x:o.location.x,y:o.location.y,rotation:-90},500).call(this.stop.bind(this)))),n.store("volume",i),r.store("volume",r.store("volume")+s))},onClickBeaker:function(){this.flags[0]||(this.flags[0]=!0,e.get(this.beaker).to({rotation:75},1e3).to({rotation:85},4e3))}})}(),ENJ.Step_ConstantVolume=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t,s,o=this.scene,n=this.store,r=this.handlers=[];s=this.flask=o.volumetricFlasks[n.flask],t=this.bottle=o.waterBottle,this.flags=[],s.active||s.start(),t.active||(t.start(),e.get(t).to({x:s.x+100,y:s.y-100},250)),r[0]=this.onClickBottle.bind(this),t.addEventListener("click",r[0]),t.cursor="pointer"},stop:function(){var t=this.bottle;this.flask;t.cursor="auto",t.removeEventListener("click",this.handlers[0]),i.stop.call(this)},update:function(t){var i,s=this.flask,o=this.bottle;this.flags[0]&&!this.flags[1]&&(i=s.store("volume")+t.delta/100,
i>=this.store.volume&&(i=this.store.volume,this.flags[1]=!0,s.stop(),o.stop(),e.get(o).to({x:o.location.x,y:o.location.y,rotation:0},250).call(this.stop.bind(this))),s.store("volume",i))},onClickBottle:function(){this.flags[0]||(this.flags[0]=!0,e.get(this.bottle).to({x:this.flask.x+50,y:this.flask.y-20,rotation:-30},250))}})}(),ENJ.Step_ShakeUp=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t,s=this.flags=[],o=this.handlers=[];t=this.flask=this.scene.volumetricFlasks[this.store.flask],t.cursor="pointer",o[0]=this.onClickFlask.bind(this),e.get(t).to({regX:62,regY:120,x:300,y:400,rotation:30},250).call(function(){s[0]=!0}),t.addEventListener("click",o[0])},stop:function(){var t=this.flask;t.cursor="auto",e.get(t).to({x:t.location.x,y:t.location.y,regX:0,regY:0},250).call(function(){t.rotation=0,t.refresh()}),t.removeEventListener("click",this.handlers[0]),i.stop.call(this)},update:function(){this.flask.refresh()},onClickFlask:function(){if(this.flags[0]){var t=this.flask,i=this.stop.bind(this);e.get(t).to({rotation:180},500).to({rotation:0},500).to({rotation:180},500).to({rotation:0},500).call(function(){i()})}}})}(),ENJ.Step_WashElectrode=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t,s,o,n=this.scene;this.flags=[],this.curve=n.curve,o=this.bottle=n.waterBottle,s=this.beaker=n.bigBeaker,t=this.electrode=n.phElectrode,o.cursor="pointer",t.cursor="pointer",e.get(s).to({x:420,y:500},250),e.get(t).to({x:520,y:300,rotation:30},250);var r=this.handlers=[];r[0]=this.onClickElectrode.bind(this),r[1]=this.onClickBottle.bind(this),t.addEventListener("click",r[0]),o.addEventListener("click",r[1])},stop:function(){var t=this.electrode,e=(this.beaker,this.bottle);e.cursor="auto",t.cursor="auto",this.curve.update(t,new CRE.Point(800,480)),t.removeEventListener("click",this.handlers[0]),e.removeEventListener("click",this.handlers[1]),i.stop.call(this)},onClickElectrode:function(){var t=this.electrode;this.flags[0]||(this.flags[0]=!0,t.start(),e.get(t).to({y:350,rotation:15},250))},onClickBottle:function(){var t=(this.electrode,this.beaker),i=this.bottle;if(this.flags[0]&&!this.flags[1]){this.flags[1]=!0;var s=this.stop.bind(this);i.scaleX=-1,e.get(i).to({x:500,y:450,rotation:30},250).call(function(){i.dump(!0,0)}).to({x:480,y:500},800).to({x:500,y:450},800).to({x:480,y:500},800).call(function(){e.get(t).to({x:t.location.x,y:t.location.y},300),i.scaleX=1,i.dump(!1,0),e.get(i).to({x:i.location.x,y:i.location.y,rotation:0},500).call(s)})}},update:function(t){this.curve.update(this.electrode,new CRE.Point(800,480))}})}(),ENJ.Step_WipeUpElectrode=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t,s,o=this.scene;t=this.paper=o.paper,s=this.electrode=o.phElectrode,this.curve=o.curve,e.get(s).to({rotation:0},500),this.flags=[];var n=this.handlers=[];n[0]=this.onClick.bind(this),t.visible=!0,t.cursor="pointer",t.addEventListener("click",n[0])},stop:function(){var t=this.electrode,e=this.paper;this.curve.update(t,new CRE.Point(800,480)),e.visible=!1,e.cursor="auto",e.removeEventListener("click",this.handlers[0]),i.stop.call(this)},update:function(){var t=this.scene.getLocalMouse();this.flags[0]||this.paper.set({x:t.x-60,y:t.y-28}),this.curve.update(this.electrode,new CRE.Point(800,480))},onClick:function(){if(!this.flags[0]){var t=this.paper,i=this.electrode,s=this;t.x>i.x-50&&t.x<i.x+50&&t.y>i.y+60&&t.y<i.y+200&&(this.flags[0]=!0,t.set({x:i.x-60,y:i.y+100}),e.get(t).to({y:i.y+200},500).to({y:i.y+100},500).to({y:i.y+200},500).to({y:i.y+100},500).call(function(){e.get(i).to({x:i.location.x,y:i.location.y},500).call(s.stop.bind(s))}))}}})}(),ENJ.Step_DumpFromFlask=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t,s,o=this.scene,n=this.store,r=this.handlers=[];t=this.flask=o.volumetricFlasks[n.flask],s=this.beaker=o.beakers[n.beaker],this.flags=[],r[0]=this.onClickFlask.bind(this),t.addEventListener("click",r[0]),t.cursor="pointer",t.start(),e.get(t).to({x:350,y:530,rotation:-60},250),s.start(),e.get(s).to({x:300,y:500},250)},stop:function(){var t=this.flask;t.cursor="auto",t.refresh(),t.stop(),this.scene.setChildIndex(t,1),t.removeEventListener("click",this.handlers[0]),i.stop.call(this)},update:function(t){var e,i,s=this.beaker,o=this.flask;o.refresh(),this.flags[0]&&!this.flags[1]&&(i=t.delta/100,e=s.store("volume"),e>=this.store.volume?(this.flags[1]=!0,e=this.store.volume):e+=i,o.store("volume",o.store("volume")-i),s.store("volume",e))},onClickFlask:function(){if(!this.flags[0]){var t=this.flask;this.flags[0]=!0,t.rotation=-75,e.get(t).to({rotation:-85},3e3).to({x:t.location.x,y:t.location.y-30,rotation:0},250).call(this.stop.bind(this))}}})}(),ENJ.Step_AddRotor=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t,s=this.scene,o=this.store,n=this.handlers=[];t=this.rotor=s.rotors[o.rotor],this.beaker=s.beakers[o.beaker],e.get(t).to({x:450,y:550},250),n[0]=this.onClickRotor.bind(this),t.addEventListener("click",n[0]),t.cursor="pointer"},stop:function(){this.rotor.removeEventListener("click",this.handlers[0]),i.stop.call(this)},onClickRotor:function(){var t=this.rotor,i=this.beaker,s=this.stop.bind(this);t.cursor="auto",e.get(t).to({x:i.x+10,y:i.y-50},250).call(function(){t.set({x:10,y:-50}),i.addChild(t),i.setChildIndex(t,0),e.get(t).to({y:80},500).call(s)})}})}(),ENJ.Step_AddFormaldehyde=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t,s,o,n=this.scene,r=this.store,a=this.handlers=[];this.flags=[],t=this.hand=n.hand,s=this.pipet=r.pipet?n[r.pipet]:n.pipet,o=this.bottle=n.beakers[r.beaker],o.start(),a[0]=this.onClick.bind(this),t.addEventListener("click",a[0]),o.visible=!0,t.set({visible:!0,y:s.y-20}),e.get(t).to({y:o.y-270,x:o.x},500),e.get(s).to({y:o.y-250,x:o.x+10},500)},stop:function(){var t=this.bottle,e=this.hand;t.stop(),e.visible=!1,e.gotoAndStop("down"),e.removeEventListener("click",this.handlers[0]),i.stop.call(this)},update:function(t){var i,s,o=this.hand,n=this.bottle,r=this.pipet,a=0,l=this.store.showLabel;n.refresh(),this.flags[0]&&!this.flags[1]&&(i=r.store("volume"),s=t.delta/1e3,a>=i?(i=a,this.flags[1]=!0,o.gotoAndStop("down"),l&&r.hideLabel(),e.get(r).to({x:r.location.x,y:r.location.y,rotation:-90},500).call(this.stop.bind(this))):i-=s,l&&r.showLabel(),r.store("volume",i),n.store("volume",n.store("volume")+s))},onClick:function(){this.flags[0]||(this.flags[0]=!0,this.hand.gotoAndStop("up"))}})}(),ENJ.Step_StartStirrer=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t,s,o,n=this,r=n.scene,a=n.store,l=n.handlers=[];t=this.stirrer=r.stirrer,o=this.electrode=r.phElectrode,s=this.beaker=r.beakers[a.beaker],this.rotor=r.rotors[a.rotor],this.curve=r.curve,this.flag=!1,l[0]=this.onClickStirrer.bind(this),t.addEventListener("click",l[0]),t.cursor="pointer",e.get(s).to({x:630,y:450},500).call(function(){n.flag=!0}),e.get(o).to({y:o.location.y-150},500).to({y:o.location.y},500)},stop:function(){this.curve.update(this.electrode,new CRE.Point(800,480)),this.stirrer.cursor="auto",this.stirrer.removeEventListener("click",this.handlers[0]),i.stop.call(this)},update:function(){this.curve.update(this.electrode,new CRE.Point(800,480))},onClickStirrer:function(){this.flag&&(this.stirrer.start(),this.rotor.gotoAndPlay(0),this.stop())}})}(),ENJ.Step_StopStirrer=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t=this.scene,e=this.store,s=this.handlers=[];this.stirrer=t.stirrer,this.phElectrode=t.phElectrode,this.beaker=t.beakers[e.beaker],this.rotor=t.rotors[e.rotor],this.curve=t.curve,this.stirrer.cursor="pointer",this.flag=!1,s[0]=this.onClickStirrer.bind(this),this.stirrer.addEventListener("click",s[0])},stop:function(){this.curve.update(this.phElectrode,new CRE.Point(800,480)),this.stirrer.cursor="auto",this.stirrer.removeEventListener("click",this.handlers[0]),i.stop.call(this)},update:function(){this.curve.update(this.phElectrode,new CRE.Point(800,480))},onClickStirrer:function(){if(!this.flag){this.flag=!0,this.stirrer.stop(),this.rotor.gotoAndStop(0);var t=this.beaker;e.get(this.phElectrode).to({y:this.phElectrode.location.y-150},500).call(function(){e.get(t).to({x:400,y:1e3},500).call(function(){t.visible=!1})}).wait(500).to({y:this.phElectrode.location.y},500).call(this.stop.bind(this))}}})}(),ENJ.Step_CorrectPHInstrument=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t=this.scene,e=(this.store,this.handlers=[]),s=this.phInstrument=t.phInstrument;e[0]=this.onCorrect.bind(this),s.addEventListener("correct",e[0]),s.start(),s.willCorrect()},stop:function(){var t=this.phInstrument;t.removeEventListener("correct",this.handlers[0]),t.stop(),i.stop.call(this)},onCorrect:function(){var t=this.phInstrument;t.store("number","CAXXXX"),e.get(t).wait(2e3).call(this.stop.bind(this))}})}(),ENJ.Step_WashPipe=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t,s,o=this.scene,n=this.store;t=this.pipe=o[n.pipe],s=this.hand=o.hand,this.flags=[],s.visible=!1,e.get(t).to({x:400,y:500,regX:7,regY:150,rotation:90},500).to({rotation:95},300).to({rotation:85},300).to({rotation:95},300).to({rotation:85},300).to({x:335,y:200,regX:0,regY:0,rotation:0},500).call(this.stop.bind(this))},stop:function(){i.stop.call(this)},update:function(t){this.pipe.refresh()}})}(),ENJ.Step_EmptyPipet=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t,s,o,n=this.scene,r=this.store,a=this.handlers=[];t=this.pipet=r.pipet?n[r.pipet]:n.pipet,s=this.ball=n.suckBall,o=this.beaker=n.bigBeaker,n.setChildIndex(s,n.getChildIndex(t)-1),this.flags=[],a[0]=this.onClickBall.bind(this),s.addEventListener("mousedown",a[0]),s.addEventListener("pressup",a[0]),s.cursor="pointer",e.get(s).wait(200).to({x:t.x+7,y:t.y,rotation:180},500).call(function(){s.start()}),e.get(o).to({x:300,y:500},500)},stop:function(){var t=this.ball,e=this.handlers;this.scene.setChildIndex(t,t.index),t.removeEventListener("mousedown",e[0]),t.removeEventListener("pressup",e[0]),t.cursor="auto",i.stop.call(this)},update:function(t){var i,s=this.pipet,o=this.beaker;s.refresh(),this.flags[0]&&!this.flags[1]&&(i=s.store("volume"),0>=i?(i=0,this.flags[1]=!0,this.store.remain?e.get(s).wait(500).to({y:o.y-400},500):e.get(s).to({x:s.location.x,y:s.location.y,rotation:-90},500),e.get(o).wait(500).to({x:o.location.x,y:o.location.y},500).call(this.stop.bind(this))):i-=t.delta/200,s.store("volume",i))},onClickBall:function(t){var i=this.ball;if(i.active)switch(t.type){case"mousedown":i.scale(),this.flags[0]=!0;break;case"pressup":i.stop(),i.suck(),e.get(i).to({x:i.location.x,y:i.location.y,rotation:0},500)}}})}(),ENJ.Step_DumpToCylinder=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t=this,s=t.scene,o=t.handlers=[];t.cylinder=s.cylinder,t.bottle=s.waterBottle,t.flags=[],o[0]=t.onClick.bind(t),t.bottle.addEventListener("click",o[0]),t.bottle.cursor="pointer",s.setChildIndex(t.cylinder,s.getChildIndex(t.bottle)+1),e.get(t.bottle).to({x:400,y:360},500),e.get(t.cylinder).to({x:300,y:300},500).call(function(){t.cylinder.start()})},stop:function(){var t=this;t.bottle.stop(),t.bottle.cursor="auto",t.bottle.removeEventListener("click",t.handlers[0]),i.stop.call(this)},update:function(t){var i,s=this,o=s.cylinder,n=s.bottle,r=s.store.volume;s.flags[0]&&!s.flags[1]&&(i=o.store("volume"),i>=r?(s.flags[1]=!0,i=r,e.get(n).to({x:n.location.x,y:n.location.y,rotation:0},500).call(function(){s.stop()})):i+=t.delta/100,o.store("volume",i))},onClick:function(){var t=this;t.cylinder.active&&!t.bottle.active&&(t.bottle.start(),e.get(t.bottle).to({x:340,y:270,rotation:-30},500).call(function(){t.flags[0]=!0}).wait(2e3))}})}(),ENJ.Step_DumpFromCylinder=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t=this,s=t.scene,o=t.store,n=this.handlers=[],r=t.cylinder=s.cylinder,a=t.beaker=s.beakers[o.beaker];e.get(a).to({x:200,y:500},500).call(function(){a.start()}),this.flags=[],n[0]=t.onClick.bind(t),r.addEventListener("click",n[0]),r.cursor="pointer"},stop:function(){var t=this,e=t.cylinder;e.stop(),e.removeEventListener("click",t.handlers[0]),e.cursor="auto",t.scene.setChildIndex(e,e.index),i.stop.call(this)},update:function(t){var i,s,o=this,n=o.cylinder,r=o.beaker;n.refresh(),o.flags[0]&&!o.flags[1]&&(s=t.delta/50,i=n.store("volume"),0>=i?(i=0,o.flags[1]=!0,e.get(n).to({x:n.location.x,y:n.location.y,rotation:0},500).call(function(){o.stop()})):i-=s,n.store("volume",i),r.store("volume",r.store("volume")+s))},onClick:function(){var t=this;t.beaker.active&&e.get(t.cylinder).to({x:240,y:500,rotation:-85},500).call(function(){t.flags[0]=!0}).to({rotation:-90},1e3)}})}(),ENJ.Step_DumpToBuret=function(){var t=ENJ.Step,e=CRE.Tween;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){t.prototype.start.call(this);var i=this,s=i.scene;i.buret=s.buret,i.bottle=s.reagenBottle,s.setChildIndex(i.bottle,s.getChildIndex(i.buret)-1),i.flags=[],i.handlers=[],i.handlers[0]=i.onClick.bind(i),i.bottle.addEventListener("click",i.handlers[0]),i.bottle.cursor="pointer",e.get(i.buret).to({x:400,y:400,rotation:30},500),i.bottle.start(),e.get(i.bottle).to({x:400,y:415,rotation:-30},500)},stop:function(){var e=this,i=e.scene,s=e.bottle;i.setChildIndex(s,s.index),s.removeEventListener("click",e.handlers[0]),s.cursor="auto",s.refresh(),s.stop(),t.prototype.stop.call(this)},update:function(t){var i,s,o=this,n=o.buret,r=o.bottle,a=o.store.volume;n.refresh(),r.refresh(),o.flags[0]&&!o.flags[1]&&(s=t.delta/100,i=n.store("volume"),i>=a?(i=a,o.flags[1]=!0,e.get(r).to({x:r.location.x,y:r.location.y,rotation:0},500).call(function(){o.stop()})):i+=s,r.store("volume",r.store("volume")-s),n.store("volume",i))},onClick:function(){var t=this;t.flags[0]||(t.flags[0]=!0,e.get(t.bottle).to({rotation:-45},250).to({rotation:-56},600))}})}(),ENJ.Step_BlowBuret=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t,s,o,n=this,r=n.scene,a=n.store,l=n.handlers=[];n.flags=[],t=n.hand=r.hand,s=n.buret=r.buret,o=n.bottle=r[a.bottle],l[0]=n.onClick.bind(n),t.addEventListener("mousedown",l[0]),t.addEventListener("pressup",l[0]),e.get(s).to({x:335,y:10,rotation:0},500),a.remain||e.get(o).to({x:335,y:510},500),t.set({visible:!0,scaleX:-1,x:365,y:410}),t.gotoAndStop("up")},stop:function(){var t=this,e=t.bottle,s=t.hand;e.stop(),s.set({visible:!1,scaleX:1}),s.removeEventListener("mousedown",t.handlers[0]),s.removeEventListener("pressup",t.handlers[0]),i.stop.call(this)},update:function(t){var i,s,o=this,n=o.bottle,r=o.buret,a=o.store.volume;r.refresh(),this.flags[0]&&!this.flags[1]&&(i=r.store("volume"),s=t.delta/100,a>=i?(i=a,this.flags[1]=!0,o.store.remain?o.stop():e.get(n).to({x:n.location.x,y:n.location.y},500).call(function(){o.stop()})):i-=s,r.store("volume",i),o.store.remain||n.store("volume",n.store("volume")+.1*s))},onClick:function(t){var e=this,i=e.hand;switch(t.type){case"mousedown":e.flags[0]=!0,i.gotoAndStop("down");break;case"pressup":e.flags[0]=!1,i.gotoAndStop("up")}}})}(),ENJ.Step_InstallBuret=function(){var t=ENJ.Step,e=CRE.Tween;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){t.prototype.start.call(this);var i=this,s=i.scene,o=(i.store,s.titrationStand),n=s.buret;e.get(o).to({x:518,y:50},500),e.get(n).wait(500).to({x:600,y:-50},500).call(function(){o.start(),i.stop()})}})}(),ENJ.Step_DropFromBuret=function(){function t(){e.apply(this,arguments)}var e=ENJ.Step,i=CRE.Tween,s=e.prototype,o=t.prototype=Object.create(s);return o.constructor=t,o.start=function(){s.start.call(this);var t=this,e=t.scene;t.stand=e.titrationStand;var o=t.buret=e.buret,n=t.hand=e.hand,r=t.drop=e.drop,a=t.phInstrument=e.phInstrument;r.set({x:o.x+40,y:o.y+500}),e.setChildIndex(r,e.getChildIndex(e.beaker)-1),t.tween=i.get(r,{loop:!0,paused:!0}).to({y:r.y+80},500),t.flags=[];var l=t.handlers=[];l[0]=t.onClick.bind(t),n.addEventListener("mousedown",l[0]),n.addEventListener("pressup",l[0]),n.set({visible:!0,scaleX:-1,x:o.x+30,y:o.y+400}),a.start(),this.originVolume=o.store("volume")},o.stop=function(){var t=this.hand,e=this.handlers;t.removeEventListener("mousedown",e[0]),t.removeEventListener("pressup",e[0]),this.drop.visible=!1,this.tween.setPaused(!0),s.stop.call(this)},o.update=function(t){var e,s,o=this,n=o.buret,r=o.stand,a=o.store.volume,l=o.store.pHs;if(n.refresh(),o.drop.visible&&!o.flags[1]){s=t.delta/1e3,e=n.store("volume");var c=(this.originVolume-e)/(this.originVolume-a);o.phInstrument.store("number",(l[0]+c*(l[1]-l[0])).toFixed(1)),a>=e?(e=a,o.flags[1]=!0,o.drop.visible=!1,o.hand.set({visible:!1,scaleX:1}),o.store.remain?(o.phInstrument.store("number",l[1].toFixed(1)),o.stop()):(i.get(n).to({x:n.location.x,y:n.location.y,rotation:0},500).call(function(){o.phInstrument.stop(),o.stop()}),i.get(r).to({x:r.location.x,y:r.location.y},500))):e-=s,n.store("volume",e)}},o.onClick=function(t){var e=this,i=e.hand;switch(t.type){case"mousedown":i.gotoAndStop("down"),e.drop.visible=!0,e.tween.setPaused(!1);break;case"pressup":i.gotoAndStop("up"),e.drop.visible=!1,e.tween.setPaused(!0)}},t}(),ENJ.Step_Interlude_1=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t=this,s=this.scene,o=this.store,n=s.board;n.store("title",o.title),n.visible=!0,e.get(n).to({alpha:1},500).wait(1e3).to({alpha:0},500).call(function(){n.visible=!1,t.stop()})},stop:function(){i.stop.call(this)}})}(),ENJ.Step_Interlude_2=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t=this,s=this.scene,o=s.rotors,n=s.beakers,r=this.store,a=s.board;a.store("title",r.title),a.visible=!0,e.get(a).to({alpha:1},500).call(function(){s.addChild(o[0]),s.addChild(o[1]),s.setChildIndex(o[0],o[0].index),s.setChildIndex(o[1],o[1].index),o[0].set(o[0].location),o[1].set(o[1].location);var t,e;for(t=0;t<n.length;t+=2)e=n[t],e.visible=!0,e.set(e.location),e.store("volume",0)}).wait(1e3).to({alpha:0},500).call(function(){a.visible=!1,t.stop()})},stop:function(){i.stop.call(this)}})}(),ENJ.Step_Interlude_3=function(){var t=ENJ.Step,e=CRE.Tween,i=t.prototype;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){i.start.call(this);var t=this,s=this.scene,o=this.store,n=s.rotors,r=s.beakers,a=s.board,l=s.volumetricFlasks;a.store("title",o.title),a.visible=!0,e.get(a).to({alpha:1},500).call(function(){s.addChild(n[0]),s.addChild(n[1]),s.setChildIndex(n[0],n[0].index),s.setChildIndex(n[1],n[1].index),n[0].set(n[0].location),n[1].set(n[1].location);var t,e;for(t=0;t<r.length;t+=2)e=r[t],e.visible=!0,e.set(e.location),e.store("color",1714618368),e.store("volume",0);l[1].store("volume",0),l[1].visible=!0,l[0].visible=!1,l[2].visible=!1}).wait(1e3).to({alpha:0},500).call(function(){a.visible=!1,t.stop()})},stop:function(){i.stop.call(this)}})}(),ENJ.Step_Record_2=function(){var t=ENJ.Step,e=(CRE.Tween,t.prototype);return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,start:function(){e.start.call(this);var t=this,i=this.scene,s=this.store,o=i.table;"canClose"in s&&!s.canClose||o.addEventListener("close",function(){o.removeAllEventListeners("close"),o.visible=!1,t.stop()}),delete s.canClose,o.store(s),o.visible=!0},stop:function(){e.stop.call(this)}})}(),ENJ.Script=function(){var t=CRE.EventDispatcher;return ENJ.defineClass({constructor:function(){t.apply(this,arguments),this.register(),this.ready()},extend:t,get numSteps(){return this.currentIndex+1},register:function(){this.scene=null,this.steps=null,this.stores=null,this.currentStep=null,this.currentIndex=0,this.listener=null},ready:function(){},update:function(t){this.currentStep&&this.currentStep.active&&this.currentStep.update(t)},start:function(){this.listener=this.update.bind(this),this.step(0),this.scene.addEventListener("tick",this.listener)},stop:function(){this.scene.removeEventListener("tick",this.listener),this.steps.splice(0)},step:function(t){var e=this.currentIndex,i=this.currentStep;if(!(0>e+t||e+t>this.steps.length-1)){i&&(i.removeAllEventListeners(),i.active&&i.stop()),e+=t;var s=this.steps[e];i=new s({scene:this.scene,store:this.stores[e]});var o=this.tips[e];o?this.scene.tip.text="提示："+o:this.scene.tip.text="",i.addEventListener("complete",this.onStepComplete.bind(this)),i.start(),this.currentIndex=e,this.currentStep=i}},next:function(){this.currentIndex<this.steps.length-1&&this.step(1)},prev:function(){this.currentIndex>0&&this.step(-1)},restart:function(){this.skip(0)},skip:function(t){this.step(t-this.currentIndex)},onStepComplete:function(){this.next(),this.dispatchEvent("stepComplete")}})}(),ENJ.Script_3=function(){var t=ENJ.Script;return ENJ.defineClass({constructor:function(){t.apply(this,arguments)},extend:t,ready:function(){var t,e,i,s,o=[],n=[],r=[];for(s=[[ENJ.Step_Interlude_1,{title:"校准PH计"},""],[ENJ.Step_WashElectrode,{},"清洗PH电极"],[ENJ.Step_WipeUpElectrode,{},"擦干PH电极"],[ENJ.Step_DumpFromFlask,{beaker:2,flask:2,volume:30},"倒一些PH标准缓冲液（6.86）至干净的烧杯中"],[ENJ.Step_AddRotor,{beaker:2,rotor:1},"加入一颗转子"],[ENJ.Step_StartStirrer,{beaker:2,rotor:1},"打开电子搅拌器，开始自动搅拌"],[ENJ.Step_CorrectPHInstrument,{},"校准PH计"],[ENJ.Step_StopStirrer,{beaker:2,rotor:1},"关闭电子搅拌器"],[ENJ.Step_WashElectrode,{},"清洗PH电极"],[ENJ.Step_WipeUpElectrode,{},"擦干PH电极"],[ENJ.Step_DumpFromFlask,{beaker:0,flask:0,volume:30},"倒一些PH标准缓冲液（9.18）至干净的烧杯中"],[ENJ.Step_AddRotor,{beaker:0,rotor:0},"加入一颗转子"],[ENJ.Step_StartStirrer,{beaker:0,rotor:0},"打开电子搅拌器，开始自动搅拌"],[ENJ.Step_CorrectPHInstrument,{},"校准PH计"],[ENJ.Step_StopStirrer,{beaker:0,rotor:0},"关闭电子搅拌器"],[ENJ.Step_Interlude_3,{title:"第一次取样和测试"},""],[ENJ.Step_SuckLiquid,{bottle:"soySauce",volume:2,remain:!1},"用移液管吸取少量酱油样品"],[ENJ.Step_WashPipe,{pipe:"pipet"},"润洗一下移液管"],[ENJ.Step_BlowLiquid,{bottle:"bigBeaker",volume:.8,remain:2,rightNow:!0},"排入废液缸"],[ENJ.Step_EmptyPipet,{remain:!0},"排入废液缸"],[ENJ.Step_SuckLiquid,{bottle:"soySauce",volume:2,remain:!1},"再吸取少量酱油样品"],[ENJ.Step_WashPipe,{pipe:"pipet"},"二次润洗一下移液管"],[ENJ.Step_BlowLiquid,{bottle:"bigBeaker",volume:.8,remain:2,rightNow:!0},"排入废液缸"],[ENJ.Step_EmptyPipet,{remain:!0},"排入废液缸"],[ENJ.Step_SuckLiquid,{bottle:"soySauce",volume:6,remain:!0},"吸取足量酱油样品"],[ENJ.Step_BlowLiquid,{bottle:"soySauce",volume:4,remain:1,rotation:20,showLabel:!0},"留下4ml的酱油样品"],[ENJ.Step_BlowLiquid,{bottle:"volumetricFlask",volume:2,remain:1,rotation:15,offsetX:-20,offsetY:20,showLabel:!0},"向干净的容量瓶中加入2ml的酱油样品"],[ENJ.Step_BlowLiquid,{bottle:"bigBeaker",volume:.8,remain:2,rightNow:!0},"多余的样品，排入废液缸"],[ENJ.Step_EmptyPipet,{},"多余的样品，排入废液缸"],[ENJ.Step_ConstantVolume,{flask:1,volume:100},"补加蒸馏水，定容至100ml"],[ENJ.Step_ShakeUp,{flask:1},"摇匀"],[ENJ.Step_WashElectrode,{},"清洗PH电极"],[ENJ.Step_WipeUpElectrode,{},"擦干PH电极"],[ENJ.Step_SuckLiquid,{pipet:"bigPipet",bottle:"volumetricFlask",volume:2,remain:!1},"用移液管吸取少量酱油样品"],[ENJ.Step_WashPipe,{pipe:"bigPipet"},"润洗一下移液管"],[ENJ.Step_BlowLiquid,{pipet:"bigPipet",bottle:"bigBeaker",volume:.8,remain:2,rightNow:!0},"排入废液缸"],[ENJ.Step_EmptyPipet,{pipet:"bigPipet",remain:!0},"排入废液缸"],[ENJ.Step_SuckLiquid,{pipet:"bigPipet",bottle:"volumetricFlask",volume:2,remain:!1},"再吸取少量酱油样品"],[ENJ.Step_WashPipe,{pipe:"bigPipet"},"二次润洗一下移液管"],[ENJ.Step_BlowLiquid,{pipet:"bigPipet",bottle:"bigBeaker",volume:.8,remain:2,rightNow:!0},"排入废液缸"],[ENJ.Step_EmptyPipet,{pipet:"bigPipet",remain:!0},"排入废液缸"],[ENJ.Step_SuckLiquid,{pipet:"bigPipet",bottle:"volumetricFlask",volume:6,remain:!0},"吸取足量的酱油样品"],[ENJ.Step_BlowLiquid,{pipet:"bigPipet",bottle:"volumetricFlask",volume:5,remain:1,rotation:15,offsetX:10,offsetY:60,showLabel:!0},"留下25ml的酱油样品"],[ENJ.Step_BlowLiquid,{pipet:"bigPipet",beaker:0,volume:0,scale:5,remain:0,offsetX:90,offsetY:120,rotation:15},"向干净烧杯中加入25ml的酱油样品"],[ENJ.Step_AddRotor,{beaker:0,rotor:1},"加入一颗转子"],[ENJ.Step_StartStirrer,{beaker:0,rotor:1},"打开电子搅拌器，开始自动搅拌"],[ENJ.Step_DumpToBuret,{volume:20},"向滴定管中加入少量氢氧化钠溶液"],[ENJ.Step_WashPipe,{pipe:"buret"},"润洗一下滴定管"],[ENJ.Step_BlowBuret,{bottle:"bigBeaker",volume:0},"排入废液缸"],[ENJ.Step_DumpToBuret,{volume:20},"再向滴定管中加入少量氢氧化钠溶液"],[ENJ.Step_WashPipe,{pipe:"buret"},"二次润洗一下滴定管"],[ENJ.Step_BlowBuret,{bottle:"bigBeaker",volume:0},"排入废液缸"],[ENJ.Step_DumpToBuret,{volume:82},"向滴定管中加入足量氢氧化钠溶液"],[ENJ.Step_BlowBuret,{bottle:"bigBeaker",volume:80},"滴定管中液面降至零刻度线"],[ENJ.Step_InstallBuret,{},"夹好滴定管"],[ENJ.Step_DropFromBuret,{volume:70,remain:!0,pHs:[6.2,8.2]},"滴定..."],[ENJ.Step_Record_2,{v1_1:16.41},"记录第一次滴定体积"],[ENJ.Step_SuckLiquid,{pipet:"pipet2",bottle:"formaldehyde",volume:6,remain:!1,showLabel:!0},"吸取足量的酱油样品"],[ENJ.Step_AddFormaldehyde,{pipet:"pipet2",beaker:0,volume:0},"向干净烧杯中加入25ml的酱油样品"],[ENJ.Step_DropFromBuret,{volume:60,pHs:[8.2,9.2]},"滴定..."],[ENJ.Step_StopStirrer,{beaker:0,rotor:1},"关闭电子搅拌器"],[ENJ.Step_Record_2,{v1_2:16.41,v1_m:0},"记录第一次滴定体积"],[ENJ.Step_Interlude_1,{title:"第二次取样和测试"},""],[ENJ.Step_WashElectrode,{},"清洗PH电极"],[ENJ.Step_WipeUpElectrode,{},"擦干PH电极"],[ENJ.Step_SuckLiquid,{pipet:"bigPipet",bottle:"volumetricFlask",volume:6,remain:!0},"吸取足量的酱油样品"],[ENJ.Step_BlowLiquid,{pipet:"bigPipet",bottle:"volumetricFlask",volume:5,remain:1,rotation:15,offsetX:10,offsetY:60,showLabel:!0},"留下25ml的酱油样品"],[ENJ.Step_BlowLiquid,{pipet:"bigPipet",beaker:2,volume:0,scale:5,remain:0,offsetX:90,offsetY:120,rotation:15},"向干净烧杯中加入25ml的酱油样品"],[ENJ.Step_AddRotor,{beaker:2,rotor:0},"加入一颗转子"],[ENJ.Step_StartStirrer,{beaker:2,rotor:0},"打开电子搅拌器，开始自动搅拌"],[ENJ.Step_DumpToBuret,{volume:82},"向滴定管中加入足量氢氧化钠溶液"],[ENJ.Step_BlowBuret,{bottle:"bigBeaker",volume:80},"滴定管中液面降至零刻度线"],[ENJ.Step_InstallBuret,{},"夹好滴定管"],[ENJ.Step_DropFromBuret,{volume:70,remain:!0,pHs:[6.2,8.2]},"滴定..."],[ENJ.Step_Record_2,{v2_1:16.42},"记录第二次滴定体积，求出平均值"],[ENJ.Step_SuckLiquid,{pipet:"pipet2",bottle:"formaldehyde",volume:6,remain:!1,showLabel:!0},"吸取足量的酱油样品"],[ENJ.Step_AddFormaldehyde,{pipet:"pipet2",beaker:2,volume:0},"向干净烧杯中加入25ml的酱油样品"],[ENJ.Step_DropFromBuret,{volume:60,pHs:[8.2,9.2]},"滴定..."],[ENJ.Step_StopStirrer,{beaker:2,rotor:0},"关闭电子搅拌器"],[ENJ.Step_Record_2,{v2_2:16.42,v2_m:16.42},"记录第二次滴定体积，求出平均值"],[ENJ.Step_Interlude_2,{title:"空白实验"},""],[ENJ.Step_WashElectrode,{},"清洗PH电极"],[ENJ.Step_WipeUpElectrode,{},"擦干PH电极"],[ENJ.Step_DumpToCylinder,{volume:25},"量取25ml的蒸馏水"],[ENJ.Step_DumpFromCylinder,{beaker:0},"加入到干净的烧杯中"],[ENJ.Step_AddRotor,{beaker:0,rotor:1},"加入一颗转子"],[ENJ.Step_StartStirrer,{beaker:0,rotor:1},"打开电子搅拌器，开始自动搅拌"],[ENJ.Step_DumpToBuret,{volume:82},"向滴定管中加入足量氢氧化钠溶液"],[ENJ.Step_BlowBuret,{bottle:"bigBeaker",volume:80},""],[ENJ.Step_InstallBuret,{},""],[ENJ.Step_DropFromBuret,{volume:70,remain:!0,pHs:[7,8.2]},""],[ENJ.Step_Record_2,{v0_1:.02},"记录空白滴定体积，计算酱油的氨基态氮含量"],[ENJ.Step_SuckLiquid,{pipet:"pipet2",bottle:"formaldehyde",volume:6,remain:!1,showLabel:!0},"吸取足量的酱油样品"],[ENJ.Step_AddFormaldehyde,{pipet:"pipet2",beaker:0,volume:0},"向干净烧杯中加入25ml的酱油样品"],[ENJ.Step_DropFromBuret,{volume:60,pHs:[8.2,9.2]},"滴定..."],[ENJ.Step_StopStirrer,{beaker:0,rotor:1},"关闭电子搅拌器"],[ENJ.Step_Record_2,{v0_2:.02,xx:5.84,canClose:!1},"记录空白滴定体积，计算酱油的氨基态氮含量"]],t=0,e=s.length;e>t;++t)i=s[t],o.push(i[0]),n.push(i[1]),r.push(i[2]);this.steps=o,this.stores=n,this.tips=r}})}(),ENJ.Experiment=function(){function t(t,e,i){this.lab=t,this.scene=e,this.script=i,t.put(e),i.scene=e,i.start()}return t}(),ENJ.Lab=function(){function t(t){e.apply(this,arguments),this.register(),this.ready()}var e=CRE.Stage,i=CRE.Shape,s=CRE.Graphics,o=t.prototype=Object.create(e.prototype);return o.constructor=t,o.register=function(){this.progressBar=null},o.ready=function(){this.enableMouseOver();var t=new s;t.beginFill("#0f0").drawRect(0,0,600,5);var e=new i(t);t=new s,t.beginFill("#0f0").drawRect(0,0,600,1);var o=new i(t);this.addChild(o),o.set({x:180,y:255}),this.addChild(e),e.set({x:180,y:250}),this.progressBar=e},o.progress=function(t){this.progressBar.scaleX=t},o.put=function(t){this.removeAllChildren(),this.progressBar=null,this.addChild(t)},t}();var lab=new ENJ.Lab("stage");lab.active=!0,(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame)&&(CRE.Ticker.timingMode="raf"),CRE.Ticker.addEventListener("tick",update),RES.addEventListener("complete",function(){lab.progress(1);var t=new ENJ.Scene_3,e=new ENJ.Script_3;t.set({x:60,scaleX:ENJ.scaleY,scaleY:ENJ.scaleY}),new ENJ.Experiment(lab,t,e)}),RES.addEventListener("progress",function(t){lab.progress(t.progress)}),RES.loadManifest({path:"../../assets/",manifest:[{id:"手",src:"手.png"},{id:"水滴",src:"水滴.png"},{id:"水流",src:"水流.png"},{id:"纸巾",src:"纸巾.png"},{id:"转子",src:"转子.png"},{id:"袋子",src:"袋子.png"},{id:"粉末",src:"粉末.png"},{id:"剪刀",src:"剪刀.png"},{id:"引流棒",src:"引流棒.png"},{id:"标签",src:"标签.png"},{id:"吸球",src:"吸球.png"},{id:"吸嘴",src:"吸嘴.png"},{id:"蝴蝶夹",src:"蝴蝶夹.png"},{id:"滴定架",src:"滴定架.png"},{id:"滴定管",src:"滴定管.png"},{id:"滴定管液体",src:"滴定管液体.png"},{id:"磁力搅拌器",src:"磁力搅拌器.png"},{id:"磁力搅拌器旋钮",src:"磁力搅拌器旋钮.png"},{id:"PH仪",src:"PH仪.png"},{id:"PH仪面板",src:"PH仪面板.png"},{id:"PH电极",src:"PH电极.png"},{id:"PH电极套",src:"PH电极套.png"},{id:"酱油瓶",src:"酱油瓶.png"},{id:"酱油瓶盖",src:"酱油瓶盖.png"},{id:"酱油",src:"酱油.png"},{id:"容量瓶",src:"容量瓶.png"},{id:"容量瓶盖",src:"容量瓶盖.png"},{id:"容量瓶液体",src:"容量瓶液体.png"},{id:"量筒",src:"量筒.png"},{id:"量筒液体",src:"量筒液体.png"},{id:"盖子甲",src:"盖子甲.png"},{id:"试剂瓶",src:"试剂瓶.png"},{id:"试剂瓶液体",src:"试剂瓶液体.png"},{id:"氢氧化钠标签",src:"氢氧化钠标签.png"},{id:"甲醛标签",src:"甲醛标签.png"},{id:"移液管",src:"移液管.png"},{id:"移液管液体",src:"移液管液体.png"},{id:"移液管架",src:"移液管架.png"},{id:"蒸馏水瓶",src:"蒸馏水瓶.png"},{id:"烧杯",src:"烧杯.png"},{id:"烧杯液体",src:"烧杯液体.png"},{id:"关闭按钮",src:"关闭按钮.png"},{id:"结果报告3",src:"结果报告3.png"},{id:"背景",src:"背景.png"}]});